# gochat

`gochat` is a simple websocket based chat application with a standard client-server architecture. The `gochat` client is a CLI based client, leveraging the [cobra](https://pkg.go.dev/github.com/spf13/cobra@v1.9.1) framework. Users can register using the command `gochat register -u <username>`. After that a prompt will follow, asking for a password. If the registration was successful, a public-private (RSA) key pair will be created and an access token will be returned. The access token is a json web token that is used to authenticate a user, and is valid for 24 hours. After expiry, a new access token can be created by running `gochat authenticate <username>` – again, a prompt will ask for the password.

The RSA key pair is used for end-to-end encryption – this feature is currently only available in 1:1 chats, not for chat rooms. The public key is stored on the server, the private key will be stored as an encrypted pem file on the client – both the accesstoken and the private key will be sored in `homeDir/.gochat/<username>`. The private key stored client side, is password protected. The password for the private key is stored on the system keychain. For 1:1 messages classic end2end encryption is applied: the sender generates a random AES, uses the AES key to encrypt the message, gets the recipient's public key from the server and encrypts the AES key with the public key. The recipient can decrypt the AES key with the private key and then decrypt the message with the AES key. This ensures nobody can read 1:1 messages, except both parties involved. BUT: the traffic between client/server is plain http and **not** ssl secured, therefore making it susceptible to man-in-the-middle attacks!

To start chatting with other people run `gochat chat -u <username>`. The `username` tag refers to your username and not the recipient you are trying to text. This is because it is possible to have multiple accounts on one machine. If you start the app, you will by default be added to the `general` group chat and can start chatting with the people in the chat room. If you wish to switch rooms, you can type `/join <room-name> <message>[optional]`. If the room exists, you will be added to it, if it does not yet exist, it will be created. If you wish to send direct messages to a user, type `/dm <recipient> <message>[optional]`. Typing `/exit` will exit the program.

A feature to call other users, as well as a deamon process that enables constant connection to the server, are currently in progress. To find details about commands and the parameters they take, run `gochat [command] --help`.